<Window x:Class="Phobos.Components.Plugin.PCOPluginInstaller"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Phobos.Components.Plugin"
        mc:Ignorable="d"
        Title="Phobos.Plugin.Installer"        Width="600"
        Height="450"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- 颜色资源 -->

        <SolidColorBrush x:Key="PrimaryBrush" Color="{DynamicResource PrimaryColor}"/>
        <SolidColorBrush x:Key="PrimaryHoverBrush" Color="{DynamicResource PrimaryHoverColor}"/>
        <SolidColorBrush x:Key="SecondaryBrush" Color="{DynamicResource Background2Color}"/>
        <SolidColorBrush x:Key="BackgroundBrush" Color="{DynamicResource Background1Color}"/>
        <SolidColorBrush x:Key="TitleBarBrush" Color="{DynamicResource TitleBarColor}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{DynamicResource BorderColor}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{DynamicResource Foreground1Color}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{DynamicResource Foreground2Color}"/>
        <SolidColorBrush x:Key="TextMutedBrush" Color="{DynamicResource Foreground4Color}"/>

        <!-- 字体大小资源 -->
        <sys:Double x:Key="FontSizeTitle" xmlns:sys="clr-namespace:System;assembly=mscorlib">14</sys:Double>
        <sys:Double x:Key="FontSizePluginName" xmlns:sys="clr-namespace:System;assembly=mscorlib">24</sys:Double>
        <sys:Double x:Key="FontSizeVersion" xmlns:sys="clr-namespace:System;assembly=mscorlib">12</sys:Double>
        <sys:Double x:Key="FontSizeManufacturer" xmlns:sys="clr-namespace:System;assembly=mscorlib">13</sys:Double>
        <sys:Double x:Key="FontSizeDescription" xmlns:sys="clr-namespace:System;assembly=mscorlib">14</sys:Double>
        <sys:Double x:Key="FontSizeButton" xmlns:sys="clr-namespace:System;assembly=mscorlib">14</sys:Double>

        <!-- 尺寸资源 -->
        <sys:Double x:Key="TitleBarHeight" xmlns:sys="clr-namespace:System;assembly=mscorlib">40</sys:Double>
        <sys:Double x:Key="PluginIconSize" xmlns:sys="clr-namespace:System;assembly=mscorlib">80</sys:Double>
        <sys:Double x:Key="TitleIconSize" xmlns:sys="clr-namespace:System;assembly=mscorlib">20</sys:Double>
        <sys:Double x:Key="ControlButtonSize" xmlns:sys="clr-namespace:System;assembly=mscorlib">32</sys:Double>
        <sys:Double x:Key="BannerWidth" xmlns:sys="clr-namespace:System;assembly=mscorlib">200</sys:Double>
        <sys:Double x:Key="BannerHeight" xmlns:sys="clr-namespace:System;assembly=mscorlib">120</sys:Double>
        <sys:Double x:Key="ButtonWidth" xmlns:sys="clr-namespace:System;assembly=mscorlib">100</sys:Double>
        <sys:Double x:Key="ButtonHeight" xmlns:sys="clr-namespace:System;assembly=mscorlib">36</sys:Double>
        <Thickness x:Key="WindowPadding">0</Thickness>
        <Thickness x:Key="ContentPadding">20</Thickness>
        <Thickness x:Key="ButtonMargin">10,0,0,0</Thickness>
        <CornerRadius x:Key="WindowCornerRadius">8</CornerRadius>
        <CornerRadius x:Key="ButtonCornerRadius">4</CornerRadius>

        <!-- 按钮样式 -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="{StaticResource FontSizeButton}"/>
            <Setter Property="Width" Value="{StaticResource ButtonWidth}"/>
            <Setter Property="Height" Value="{StaticResource ButtonHeight}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="{StaticResource ButtonCornerRadius}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="FontSize" Value="{StaticResource FontSizeButton}"/>
            <Setter Property="Width" Value="{StaticResource ButtonWidth}"/>
            <Setter Property="Height" Value="{StaticResource ButtonHeight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{StaticResource ButtonCornerRadius}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TitleBarBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ControlButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="Width" Value="{StaticResource ControlButtonSize}"/>
            <Setter Property="Height" Value="{StaticResource ControlButtonSize}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource BorderBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource ControlButtonStyle}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E53935"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- 主容器 -->
    <Border Background="{StaticResource BackgroundBrush}"
            CornerRadius="{StaticResource WindowCornerRadius}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="45"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 标题栏 -->
            <Border Grid.Row="0"
                    Background="{StaticResource TitleBarBrush}"
                    CornerRadius="8,8,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- 图标和标题 -->
                    <StackPanel Grid.Column="0"
                                Orientation="Horizontal"
                                VerticalAlignment="Center"
                                Margin="12,0,0,0">
                        <Image x:Name="TitleIcon"
                               Width="{StaticResource TitleIconSize}"
                               Height="{StaticResource TitleIconSize}"
                               Source="pack://application:,,,/Resources/installer_icon.png"/>
                        <TextBlock Text="插件安装器"
                                   FontSize="{StaticResource FontSizeTitle}"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </StackPanel>

                    <!-- 控制按钮 -->
                    <StackPanel Grid.Column="2"
                                Orientation="Horizontal">
                        <Button Style="{StaticResource ControlButtonStyle}"
                                Click="MinimizeButton_Click">
                            <TextBlock Text="─" FontSize="12"/>
                        </Button>
                        <Button Style="{StaticResource CloseButtonStyle}"
                                Click="CloseButton_Click">
                            <TextBlock Text="✕" FontSize="12"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 插件信息区域 -->
            <Grid Grid.Row="1" Margin="{StaticResource ContentPadding}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 插件图标 -->
                <Border Grid.Column="0"
                        Width="{StaticResource PluginIconSize}"
                        Height="{StaticResource PluginIconSize}"
                        CornerRadius="12"
                        Background="{StaticResource TitleBarBrush}">
                    <Image x:Name="PluginIcon"
                           Stretch="Uniform"
                           Margin="8"
                           Source="pack://application:,,,/Resources/plugin_icon.png"/>
                </Border>

                <!-- 插件名称、版本、制造商 -->
                <StackPanel Grid.Column="1"
                            VerticalAlignment="Center"
                            Margin="16,0,16,0">
                    <!-- 名称和版本 -->
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="PluginNameText"
                                   Text="示例插件名称"
                                   FontSize="{StaticResource FontSizePluginName}"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   VerticalAlignment="Bottom"/>
                        <TextBlock x:Name="PluginVersionText"
                                   Text="v1.0.0"
                                   FontSize="{StaticResource FontSizeVersion}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   VerticalAlignment="Bottom"
                                   Margin="8,0,0,3"/>
                    </StackPanel>
                    <!-- 制造商 -->
                    <TextBlock x:Name="PluginManufacturerText"
                               Text="制造商名称"
                               FontSize="{StaticResource FontSizeManufacturer}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Banner -->
                <Border Grid.Column="2"
                        Width="{StaticResource BannerWidth}"
                        Height="{StaticResource BannerHeight}"
                        CornerRadius="8"
                        Background="{StaticResource TitleBarBrush}">
                    <Image x:Name="BannerImage"
                           Stretch="UniformToFill"
                           Source="pack://application:,,,/Resources/banner.png"/>
                </Border>
            </Grid>

            <!-- 插件介绍 -->
            <Border Grid.Row="2"
                    Margin="20,0,20,0"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled"
                              Padding="12">
                    <TextBlock x:Name="PluginDescriptionText"
                               Text="这里是插件的详细介绍内容。支持多行显示和滚动浏览。&#x0a;&#x0a;您可以在这里添加更多关于插件功能、使用说明、更新日志等信息。&#x0a;&#x0a;• 功能特性 1&#x0a;• 功能特性 2&#x0a;• 功能特性 3&#x0a;&#x0a;感谢您使用本插件！"
                               FontSize="{StaticResource FontSizeDescription}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               TextWrapping="Wrap"
                               LineHeight="22"/>
                </ScrollViewer>
            </Border>

            <!-- 底部按钮 -->
            <Border Grid.Row="3"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,1,0,0"
                    Margin="0,20,0,0">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="20,16,20,16">
                    <Button Content="退出"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="ExitButton_Click"/>
                    <Button Content="立即安装"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="{StaticResource ButtonMargin}"
                            Click="InstallButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>